# This viminfo file was generated by Vim 7.4.
# You may edit it if you're careful!

# Value of 'encoding' when this file was written
*encoding=utf-8


# hlsearch on (H) or off (h):
~H
# Last Search Pattern:
~MSle0~/token.csv

# Last Substitute Search Pattern:
~MSle0&kubernetes-charts.storage.googleapis.com

# Last Substitute String:
$

# Command Line History (newest to oldest):
:q
:wq
:q!
:q1
:Q
:w
:52
:31
:13
:47
:Wq
:10
:60
:.,$d
:.,$-2d
:..$-2
:s#kubernetes-charts.storage.googleapis.com#charts.helm.sh/stable#g
:wwq
::q
:number
:=
:set number
:set tabstop=4
:index
:42
:76
:1
:s/'/"/g
:%@\'@\"@
:%@'@"@
:wqw
:!
:%s@https://download.docker.com@https://mirrors.tuna.tsinghua.edu.cn/docker-ce@
:161
:y2y
:2yy
:GR
:3
:46
:q\
:43
:38
:30
:30\
:set nu
:nohl
:wq!
:qq
:e!
:sp

# Search String History (newest to oldest):
?/token.csv
?/@type elas
?/elastic
?/30
?/jvm
?/image
?/volume
?/persistence
?/namespace
?/config
?/replicas
?/spec
?/persis
?/empty
?/empry
?/false
?/flase
?/size
?/persistence:
?/xpack
?/ima
?/ima	
?/scrape
?/scra
?/resource
?/--source
?/10250
?/Dep
?/metrics.k8s
?/--min
?/API
?/tedb
?/De
?/uninstall
?/Clus
?/clu
?/timeout
?/interval
?/sc
?/scrape_
?/host
?/65534
?/cert
?/crt
?/ca
?/8443
?/443
?/key
?/horizontal
?/feature

# Expression History (newest to oldest):

# Input Line History (newest to oldest):

# Input Line History (newest to oldest):

# Registers:
"0	LINE	0
	scp root@10.134.196.21:/root/.kube/config /root/.kube/config
""1	LINE	0
	  type: NodePort      #这里代表是NodePort类型的
"2	LINE	0
	  ports:
"3	LINE	0
	  - port: 8080        #这里的端口和clusterIP对应，即ip:8080,供内部访问。
"4	LINE	0
	    targetPort: 8080  #端口一定要和container暴露出来的端口对应
"5	LINE	0
	    protocol: TCP
"6	LINE	0
	    nodePort: 32143   # 所有的节点都会开放此端口，此端口供外部调用。
"7	LINE	0
	  selector:
"8	LINE	0
	    app: web          #这里选择器一定要选择容器的标签，之前写name:kube-node是错的。
"9	LINE	0
	#加载ipvs的内核模块
	source ~/ipvs.moudule
	
	
	echo "installing k8s compnents"
	yum -y install kubelet kubeadm kubectl 
	mkdir /root/.kube
	
	#配置k8s的net设置bridge
	cat << eof > /etc/sysctl.d/k8s.conf
	net.bridge.bridge-nf-call-ip6tables = 1
	net.bridge.bridge-nf-call-iptables = 1
	eof
	sysctl -p /etc/sysctl.d/k8s.conf
	
	#配置iptables转发
	iptables -P FORWARD ACCEPT
	
	#注意添加代理时使用代理服务器支持的代理 ，如http，看是否代理服务器开启了https代理。再选择https://,特别注意。
	
	
	#配置 kubelet  文件忽略swap 和ipvs启用
"q	CHAR	0
	ww
"-	CHAR	0
	y

# File marks:
'0  1  0  ~/manifests/scripts/linux_init.sh
'1  12  27  ~/manifests/flannel/networkpolicy/pod-1.ym
'2  17  0  ~/manifests/flannel/networkpolicy/my-ns-ingress1.yaml
'3  1  0  ~/manifests/flannel/networkpolicy/my-ns-ingress2.yaml
'4  1  0  ~/manifests/deploy-demo.yaml
'5  1  0  ~/manifests/flannel/networkpolicy/allow-netpol.yaml
'6  1  0  ~/manifests/flannel/networkpolicy/pod-1.yml
'7  1  0  ~/manifests/flannel/networkpolicy/pod-1.ym
'8  1  0  ~/manifests/flannel/networkpolicy/egress-def.yml
'9  1  0  ~/manifests/flannel/networkpolicy/ingress-def.yml

# Jumplist (newest first):
-'  1  0  ~/manifests/scripts/linux_init.sh
-'  12  27  ~/manifests/flannel/networkpolicy/pod-1.ym
-'  7  0  ~/manifests/flannel/networkpolicy/pod-1.ym
-'  17  0  ~/manifests/flannel/networkpolicy/my-ns-ingress1.yaml
-'  1  0  ~/manifests/flannel/networkpolicy/my-ns-ingress2.yaml
-'  1  0  ~/manifests/deploy-demo.yaml
-'  1  0  ~/manifests/flannel/networkpolicy/my-ns-ingress1.yaml
-'  1  0  ~/manifests/flannel/networkpolicy/allow-netpol.yaml
-'  1  0  ~/manifests/flannel/networkpolicy/pod-1.yml
-'  1  0  ~/manifests/flannel/networkpolicy/pod-1.ym
-'  1  0  ~/manifests/flannel/networkpolicy/egress-def.yml
-'  1  0  ~/manifests/flannel/networkpolicy/ingress-def.yml
-'  1  0  ~/manifests/ingress/ingress-tomcat.yaml
-'  1  0  ~/manifests/ingress/ingress-myapp.yaml
-'  50  24  /usr/lib/systemd/system/docker.service
-'  52  0  /usr/lib/systemd/system/docker.service
-'  120  0  /etc/profile
-'  1  0  /etc/profile
-'  1  0  /etc/docker/daemon.json
-'  1  0  /etc/systemd/system/docker.service.d/https-proxy.conf
-'  73  0  ~/manifests/scripts/k8s_init.sh
-'  69  0  ~/manifests/scripts/k8s_init.sh
-'  45  4  /etc/kubernetes/manifests/kube-apiserver.yaml
-'  1  0  /etc/kubernetes/pki/apiserver-kubelet-client.key
-'  1  0  /var/lib/kubelet/config.yaml
-'  1  0  /etc/kubernetes/kubelet.conf
-'  1  0  /etc/kubernetes/manifests/kube-apiserver.yaml
-'  1  0  /etc/kubernetes/bootstrap-kubelet.conf
-'  18  0  /usr/lib/systemd/system/docker.service
-'  1  0  /usr/lib/systemd/system/docker.service
-'  1  0  /etc/ansible/hosts
-'  1  0  ~/manifests/scripts/k8s_init.sh
-'  1  0  /etc/hosts
-'  47  31  ~/efk/elasticsearch-statefulset.yaml
-'  1  4  ~/efk/fluentd-configmap.yaml
-'  92  4  ~/efk/fluentd-configmap.yaml
-'  253  0  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  78  0  ~/efk/elasticsearch-statefulset.yaml
-'  5  0  ~/efk/elasticsearch-storageclass.yaml
-'  1  0  ~/helm3/elasticsearch/charts/kibana/templates/pvc.yaml
-'  1  0  ~/helm3/elasticsearch/Chart.yaml
-'  1  0  ~/helm3/elasticsearch/templates/configmap-es.yaml
-'  196  6  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  173  10  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  87  10  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  85  40  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  84  25  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  78  10  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  54  57  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  1  0  ~/helm3/elasticsearch/templates/master-statefulset.yaml
-'  352  12  ~/helm3/elasticsearch/values.yaml
-'  170  0  ~/helm3/elasticsearch/values.yaml
-'  303  4  ~/helm3/elasticsearch/values.yaml
-'  45  0  ~/efk/kibana.yaml.bak
-'  1  0  ~/efk/kibana.yaml.bak
-'  1  0  ~/efk/statefulset.bak
-'  77  6  ~/efk/statefulset.bak
-'  16  20  ~/manifests/service-demo.yaml
-'  1  0  ~/manifests/service-demo.yaml
-'  22  0  ~/manifests/service-demo.yaml
-'  23  103  ~/manifests/service-demo.yaml
-'  1  0  ~/manifests/prometheus/kube-prometheus/manifests/grafana-service.yaml
-'  1  0  ~/manifests/prometheus/kube-prometheus/manifests/prometheus-service.yaml
-'  45  28  ~/efk/kibana.yaml
-'  1  0  ~/efk/kibana.yaml
-'  72  0  ~/manifests/volumes/pv-demo.yaml
-'  1  0  ~/manifests/volumes/pv-demo.yaml
-'  48  12  ~/efk/statefulset.bak
-'  77  10  ~/efk/elasticsearch-statefulset.yaml
-'  1  0  ~/efk/elasticsearch-statefulset.yaml
-'  159  0  ~/efk/elasticsearch-statefulset.yaml
-'  8  2  ~/nfs/deploy/deployment.yaml
-'  3  0  ~/helm3/elasticsearch/values.yaml
-'  1  0  ~/manifests/steteful-demo.yaml
-'  156  0  ~/efk/elasticsearch-statefulset.yaml
-'  16  4  ~/efk/elasticsearch.svc.yaml
-'  149  0  ~/efk/elasticsearch-statefulset.yaml
-'  82  2  ~/efk/elasticsearch-statefulset.yaml
-'  151  6  ~/efk/elasticsearch-statefulset.yaml
-'  155  10  ~/efk/elasticsearch-statefulset.yaml
-'  1  0  ~/nfs/deploy/test-claim.yaml
-'  6  53  ~/nfs/deploy/class.yaml
-'  1  0  ~/nfs/deploy/class.yaml
-'  1  0  ~/efk/elasticsearch-storageclass.yaml
-'  92  8  ~/efk/elasticsearch-statefulset.yaml
-'  1  0  ~/efk/elasticsearch.svc.yaml
-'  4  14  ~/efk/kube-logging.yaml
-'  1  0  ~/efk/kube-logging.yaml
-'  3  0  ~/efk/readme.txt
-'  1  0  ~/efk/readme.txt
-'  25  48  ~/efk/readme.txt
-'  620  2  ~/helm3/elasticsearch/values.yaml
-'  849  46  ~/helm3/elasticsearch/values.yaml
-'  838  46  ~/helm3/elasticsearch/values.yaml
-'  783  45  ~/helm3/elasticsearch/values.yaml
-'  715  46  ~/helm3/elasticsearch/values.yaml
-'  704  46  ~/helm3/elasticsearch/values.yaml
-'  664  43  ~/helm3/elasticsearch/values.yaml

# History of marks within files (newest to oldest):

> ~/manifests/scripts/linux_init.sh
	"	1	0

> ~/manifests/flannel/networkpolicy/pod-1.ym
	"	12	27
	^	12	28
	.	12	27
	+	4	13
	+	7	5
	+	4	12
	+	9	14
	+	6	13
	+	9	0
	+	12	27

> ~/manifests/flannel/networkpolicy/my-ns-ingress1.yaml
	"	17	0
	^	17	0
	.	16	17
	+	16	17

> ~/manifests/flannel/networkpolicy/my-ns-ingress2.yaml
	"	14	10
	^	14	22
	.	14	21
	+	14	21

> ~/manifests/deploy-demo.yaml
	"	1	0

> ~/manifests/flannel/networkpolicy/pod-1.yml
	"	10	4
	^	9	16
	.	6	0
	+	6	15
	+	9	15
	+	6	0

> ~/manifests/flannel/networkpolicy/allow-netpol.yaml
	"	1	0

> ~/manifests/flannel/networkpolicy/egress-def.yml
	"	1	0

> ~/manifests/flannel/networkpolicy/ingress-def.yml
	"	1	0

> ~/manifests/ingress/ingress-tomcat.yaml
	"	1	0

> ~/manifests/ingress/ingress-myapp.yaml
	"	1	0

> /usr/lib/systemd/system/docker.service
	"	50	24

> /etc/profile
	"	120	0

> /etc/docker/daemon.json
	"	1	0

> /etc/systemd/system/docker.service.d/https-proxy.conf
	"	1	0

> ~/manifests/scripts/k8s_init.sh
	"	73	0

> /etc/kubernetes/manifests/kube-apiserver.yaml
	"	45	4

> /etc/kubernetes/pki/apiserver-kubelet-client.key
	"	1	0

> /var/lib/kubelet/config.yaml
	"	1	0

> /etc/kubernetes/kubelet.conf
	"	1	0
